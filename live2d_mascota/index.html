<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Live2D Friend</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      
      /* ðŸŽ¨ TRANSPARENCIA TOTAL ðŸŽ¨ */
      background: transparent !important;
      
      /* Sin scroll */
      overscroll-behavior: none;
      -webkit-overflow-scrolling: none;
    }

    body {
      /* Cursor personalizado */
      cursor: grab;
    }

    body:active {
      cursor: grabbing;
    }

    canvas {
      width: 100% !important;
      height: 100% !important;
      display: block;

      /* ðŸŽ¨ Canvas transparente ðŸŽ¨ */
      background: transparent !important;
      
      /* Sin efectos */
      box-shadow: none !important;
      border: none !important;
    }

    /* Oculta scrollbars */
    ::-webkit-scrollbar {
      display: none;
      width: 0;
      height: 0;
    }

    * {
      scrollbar-width: none;
    }

    /* Oculta cualquier imagen de fondo predefinida */
    img[src*="back_class_normal"] {
      display: none !important;
      visibility: hidden !important;
    }
  </style>
  
  <!-- Live2D Core -->
  <script src="Core/live2dcubismcore.js"></script>
  
  <!-- Tu build compilado -->
  <script type="module" crossorigin src="assets/sdk/demo.js"></script>
  
  <script>
    // Forzar transparencia en load
    window.addEventListener('load', () => {
      console.log('âœ… Live2D cargado');
      
      // Fondo body
      const transparentStyles = {
        background: 'transparent',
        backgroundColor: 'transparent',
        backgroundImage: 'none'
      };

      Object.assign(document.body.style, transparentStyles);
      Object.assign(document.documentElement.style, transparentStyles);

      // Encontrar canvas y forzar transparencia
      setTimeout(() => {
        const canvas = document.querySelector('canvas');
        if (canvas) {
          canvas.style.background = 'transparent';
          console.log('âœ… Canvas encontrado y transparentado');

          // Forzar clearColor en WebGL
          const gl = canvas.getContext('webgl2') || canvas.getContext('webgl');
          if (gl) {
            gl.clearColor(0, 0, 0, 0); // Alpha = 0 (transparente)
            console.log('âœ… WebGL configurado con alpha=0');
          }
        }

        const removeBackgroundAssets = () => {
          document
            .querySelectorAll('img[src*="back_class_normal"], [style*="back_class_normal"]')
            .forEach((element) => {
              element.style.display = 'none';
              element.style.visibility = 'hidden';
            });
        };

        removeBackgroundAssets();

        const observer = new MutationObserver(() => {
          removeBackgroundAssets();
        });

        observer.observe(document.body, {
          childList: true,
          subtree: true,
          attributes: true,
          attributeFilter: ['style', 'class', 'src']
        });
      }, 100);
    });
  </script>
</head>
<body>
  <!-- El canvas se genera automÃ¡ticamente por demo.js -->
</body>
</html>
